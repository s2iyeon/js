# í´ë¡œì €

## ëª©í‘œ
í´ë¡œì € í•™ìŠµ

## ëª©ì°¨
- [1. í´ë¡œì €ë€?](#1-í´ë¡œì €ë€)
- [2. í´ë¡œì € ìš©ë²•](#2-í´ë¡œì €-ìš©ë²•)
  - [2.1 ìº¡ìŠí™”](#21-ìº¡ìŠí™”)
  - [2.2 ì½œë°±ê³¼ íƒ€ì´ë¨¸](#22-ì½œë°±ê³¼-íƒ€ì´ë¨¸)
  - [2.3 ì»¤ë§](#23-ì»¤ë§)
  - [2.4 Partial application](#24-partial-application)
  - [2.5 ë©”ëª¨ì´ì œì´ì…˜](#25-ë©”ëª¨ì´ì œì´ì…˜)

---

## 1. í´ë¡œì €ë€?
- ì°¸ê³ : https://ko.javascript.info/closure

### 1.1 í´ë¡œì €ë€?
- ì™¸ë¶€ í•¨ìˆ˜ì˜ ì§€ì—­ë³€ìˆ˜ë¥¼ ì™¸ë¶€ í•¨ìˆ˜ì˜ ì‹¤í–‰ì´ ì™„ë£Œëœ í›„ì—ë„ ë‚´ë¶€ í•¨ìˆ˜ì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•œ í˜„ìƒì´ë‚˜ ê·¸ ë‚´ë¶€ í•¨ìˆ˜
- í•¨ìˆ˜ê°€ ìƒì„±ë˜ëŠ” ì‹œì ì„ ê¸°ì¤€ìœ¼ë¡œ ì ‘ê·¼ ê°€ëŠ¥í•œ ë³€ìˆ˜ëŠ”, ê·¸ ìœ íš¨ë²”ìœ„ê°€ ì‚¬ë¼ì§„ í›„ì—ë„ ì ‘ê·¼ ê°€ëŠ¥í•´ì•¼ í•œë‹¤ëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ ê·œì¹™ì„ ì§€í‚¤ê¸° ìœ„í•´ ì‚¬ìš©ë˜ëŠ” ë‚´ë¶€ ë§¤ì»¤ë‹ˆì¦˜
- í´ë¡œì €ë¡œ ì¸í•´ ìœ íš¨ ë²”ìœ„ê°€ ì‚¬ë¼ì§„ ë³€ìˆ˜ì™€ í•¨ìˆ˜ë¥¼ ì ‘ê·¼í•  ìˆ˜ ìˆìŒ

```js
function outerFn(){
  const innerVal = 'outerì˜ ì§€ì—­ë³€ìˆ˜';
  const innerFn = () => {
    console.log(innerVal); // ì¶œë ¥: outerì˜ ì§€ì—­ë³€ìˆ˜
  }
  return innerFn;
}

const closureFn = outerFn();
closureFn();
```

#### ğŸ’» [04-01 í´ë¡œì €ë¥¼ ì‚¬ìš©í•˜ëŠ” ì˜ˆì œ](../workspace-ins/ch04/ex04-01.js)

### 1.2 í´ë¡œì €ê°€ ë§Œë“¤ì–´ì§€ëŠ” ì¡°ê±´
1. í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ í•¨ìˆ˜ë¥¼ ìƒì„±(ì¤‘ì²©í•¨ìˆ˜, ë‚´ë¶€í•¨ìˆ˜)
2. ë‚´ë¶€í•¨ìˆ˜ê°€ ì™¸ë¶€í•¨ìˆ˜ì˜ ì§€ì—­ë³€ìˆ˜ë¥¼ ì°¸ì¡°

---

## 2. í´ë¡œì € ìš©ë²•

### 2.1 ìº¡ìŠí™”

#### ìº¡ìŠí™”ë€?
- ê°ì²´ ë‚´ë¶€ì—ì„œë§Œ ì ‘ê·¼ ê°€ëŠ¥í•œ ì†ì„±ì„ ë§Œë“¤ì–´ ì‚¬ìš©í•˜ê³  ì™¸ë¶€ì—ì„œëŠ” í•´ë‹¹ ì†ì„±ì„ ì§ì ‘ ì ‘ê·¼í•˜ì§€ ëª»í•˜ë„ë¡ ë§Œë“œëŠ” ê°ì²´ì§€í–¥ ì–¸ì–´ì˜ íŠ¹ì§•
- í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ì„ ì–¸í•œ ì§€ì—­ë³€ìˆ˜ëŠ” ì™¸ë¶€ì—ì„œ ì ‘ê·¼í•˜ì§€ ëª»í•˜ëŠ” ë°˜ë©´ ë‚´ë¶€ í•¨ìˆ˜ì¸ í´ë¡œì €ì—ì„œëŠ” ì ‘ê·¼ ê°€ëŠ¥í•˜ë‹¤ëŠ” íŠ¹ì§•ì„ ì´ìš©í•´ì„œ êµ¬í˜„
- C++, Javaì—ì„œëŠ” private í‚¤ì›Œë“œë¡œ ì§€ì • ê°€ëŠ¥
- ES2019ì—ì„œ class ì •ì˜ì‹œ ì†ì„±ëª…ì´ë‚˜ ë©”ì„œë“œëª… ì•ì— #ì„ ë¶™ì´ë©´ í•´ë‹¹ class ë‚´ë¶€ì—ì„œë§Œ ì ‘ê·¼ ê°€ëŠ¥í•œ private ì†ì„±ê³¼ ë©”ì„œë“œ ì •ì˜ ê¸°ëŠ¥ì´ ì¶”ê°€ë¨

#### ìº¡ìŠí™”ê°€ í•„ìš”í•œ ê²½ìš°
- countì˜ ì¦ê°€ëŠ” ride ë©”ì„œë“œë¥¼ í†µí•´ì„œë§Œ ê°€ëŠ¥í•˜ê²Œ í•˜ê³  ì‹¶ì§€ë§Œ ì™¸ë¶€ì—ì„œ count ì†ì„± ì§ì ‘ ì ‘ê·¼ ê°€ëŠ¥
  ```js
  function Counter(){
  Â  this.count = 0;

  Â  this.ride = function(){
  Â  Â  this.count++;
  Â  };

  Â  this.getCount = function(){
  Â  Â  return this.count;
  Â  };
  }
  var c = new Counter();
  c.ride();
  c.ride();
  c.count += 100;
  console.log(c.getCount()); // 102
  ```

- ì™¸ë¶€ì—ì„œ count ì†ì„± ì ‘ê·¼ ë¶ˆê°€ëŠ¥
  ```js
  function Counter(){
    let count = 0;  // private ë³€ìˆ˜
    
    this.ride = function(){
      count++;      // í´ë¡œì €ë¥¼ í†µí•´ ì ‘ê·¼
    };
    
    this.getCount = function(){
      return count; // í´ë¡œì €ë¥¼ í†µí•´ ì ‘ê·¼
    };
  }

  const c = new Counter();
  c.ride();
  c.ride();
  c.count += 100;  // ì§ì ‘ ì ‘ê·¼ ë¶ˆê°€ëŠ¥
  console.log(c.getCount()); // 2
  ```

#### ğŸ’» [04-02 í´ë¡œì €ë¥¼ í™œìš©í•œ private ë³€ìˆ˜](../workspace-ins/ch04/ex04-02.js)

---

### 2.2 ì½œë°±ê³¼ íƒ€ì´ë¨¸

#### ì½œë°±ê³¼ íƒ€ì´ë¨¸ì—ì„œì˜ í´ë¡œì €
- ì§€ì •ëœ í•¨ìˆ˜ë“¤ì´ ì„ì˜ì˜ ì‹œê°„ ë’¤ì— ë¹„ë™ê¸°ì ìœ¼ë¡œ í˜¸ì¶œì´ ë  ë•Œ í•¨ìˆ˜ ì™¸ë¶€ì˜ ë°ì´í„°ì— ì ‘ê·¼í•´ì•¼ í•  í•„ìš”ê°€ ìˆëŠ” ê²½ìš°

```js
function setTimer(){
  const outer = 100;
  setTimeout(() => {
    console.log(outer);  // ì¶œë ¥: 100(í´ë¡œì €ë¥¼ í†µí•´ ì™¸ë¶€ ë³€ìˆ˜ ì ‘ê·¼ì´ ê°€ëŠ¥)
  }, 1000);
}

setTimer();
```

---

### 2.3 ì»¤ë§
- ì°¸ê³ : https://ko.javascript.info/currying-partials

#### ì»¤ë§(Currying)ì´ë€?
- ì—¬ëŸ¬ê°œì˜ ì¸ìë¥¼ ë°›ëŠ” í•¨ìˆ˜ë¥¼ ë‹¨ì¼ ì¸ìë¥¼ ë°›ëŠ” í•¨ìˆ˜ì˜ ì²´ì¸ìœ¼ë¡œ í˜¸ì¶œí•˜ë„ë¡ ë°”ê¾¸ëŠ” í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë° ê¸°ë²• ì¤‘ í•˜ë‚˜
- `sum(x, y)` â†’ `sum(x)(y)`
- í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë° ì–¸ì–´ì— ë§ì€ ê³µí—Œì„ í•œ ë¯¸êµ­ì˜ ìˆ˜í•™ì, ë…¼ë¦¬í•™ìì¸ í•˜ìŠ¤ì¼ˆ ì»¤ë¦¬ì˜ ì´ë¦„ì—ì„œ ë”°ì˜´
- í•¨ìˆ˜ì˜ ê°€ë…ì„±, ì¬ì‚¬ìš©ì´ ì¢‹ì•„ì§
- ë§ˆì§€ë§‰ ì¸ìê°€ ì…ë ¥ë  ë•Œê¹Œì§€ í•¨ìˆ˜ì˜ ì‹¤í–‰ íƒ€ì´ë°ì„ ì¡°ì ˆí•  ìˆ˜ ìˆìŒ

#### ì»¤ë§ ì˜ˆì œ

```js
function sum(a, b, c){
  return a + b + c;
}

const sum2 = function(a){
  return function(b){
    return function(c){
      return a + b + c;
    }
  };
};

const sum3 = (a) => (b) => (c) => a + b + c;

console.log(sum(10, 20, 30)); // 60
console.log(sum2(10)(20)(30)); // 60
console.log(sum3(10)(20)(30)); // 60
```

#### ğŸ’» [04-03 ì»¤ë§](../workspace-ins/ch04/ex04-03.js)

#### lodashì˜ _.curry() í•¨ìˆ˜
- lodashë€
  + https://lodash.com
  + ìë°”ìŠ¤í¬ë¦½íŠ¸ ìœ í‹¸ë¦¬í‹° ë¼ì´ë¸ŒëŸ¬ë¦¬
  + ë°°ì—´, ê°ì²´, í•¨ìˆ˜, ë¬¸ìì—´ ë“± ë‚´ì¥ ê°ì²´ë¥¼ ê°„ê²°í•˜ê²Œ ì¡°ì‘í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤Œ
  + ì½”ë“œ ê°€ë…ì„±, ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ
- _.curry() í•¨ìˆ˜
  + https://lodash.com/docs/#curry
  + ì§€ì •í•œ í•¨ìˆ˜ì— ì»¤ë§ ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ëŠ” í•¨ìˆ˜

#### ğŸ’» [04-03-02 ì»¤ë§ - ë°°ì—´ì˜ ìš”ì†Œì—ì„œ ì°¾ê¸°](../workspace-ins/ch04/ex04-03-02.js)
---

### 2.4 Partial application
- ì°¸ê³ : https://ko.javascript.info/currying-partials

#### Partial application(ë¶€ë¶„ ì ìš© í•¨ìˆ˜)ì´ë€?
- ê¸°ì¡´ í•¨ìˆ˜ì˜ ë§¤ê°œë³€ìˆ˜ ì¤‘ ì¼ë¶€ë¥¼ ë¯¸ë¦¬ ì±„ì›Œë‘” ìƒíƒœì˜ í•¨ìˆ˜

#### Partial application ë™ì‘ ë°©ì‹
1. ë¶€ë¶„ ì ìš©: ê¸°ì¡´ í•¨ìˆ˜ì— ì¼ë¶€ ë§¤ê°œë³€ìˆ˜ë¥¼ ë¯¸ë¦¬ ì „ë‹¬í•˜ì—¬ ìƒˆë¡œìš´ í•¨ìˆ˜ ìƒì„±
2. í´ë¡œì € ì €ì¥: ì „ë‹¬ë°›ì€ ë§¤ê°œë³€ìˆ˜ë“¤ì„ í´ë¡œì € ìŠ¤ì½”í”„ì— ì €ì¥
3. í•¨ìˆ˜ ë°˜í™˜: ë‚¨ì€ ë§¤ê°œë³€ìˆ˜ë¥¼ ë°›ì„ ìˆ˜ ìˆëŠ” ìƒˆë¡œìš´ í•¨ìˆ˜ ë°˜í™˜
4. ìµœì¢… ì‹¤í–‰: ë°˜í™˜ëœ í•¨ìˆ˜ í˜¸ì¶œ ì‹œ ì €ì¥ëœ ë§¤ê°œë³€ìˆ˜ì™€ ìƒˆë¡œ ì „ë‹¬ë°›ì€ ë§¤ê°œë³€ìˆ˜ë¥¼ ê²°í•©í•˜ì—¬ ì›ë³¸ í•¨ìˆ˜ ì‹¤í–‰

```js
// í•¨ìˆ˜ë¥¼ Partial applicationìœ¼ë¡œ ë§Œë“¤ì–´ì£¼ëŠ” partial ë©”ì„œë“œë¥¼ í•¨ìˆ˜ì— ì¶”ê°€
Function.prototype.partial = function(...preArgs){
  const fn = this;
  return function(...nextArgs){
    const args = [...preArgs, ...nextArgs];
    return fn(...args);
  };
};

const sum = (x, y) => {
  return x + y;
}

const sum100 = sum.partial(100); // 1ë‹¨ê³„: 100ì„ ë¯¸ë¦¬ ì ìš©í•œ ìƒˆë¡œìš´ í•¨ìˆ˜ ìƒì„±
console.log(sum100(200)); // 2ë‹¨ê³„: ë‚¨ì€ ë§¤ê°œë³€ìˆ˜ 200ì„ ì „ë‹¬í•˜ì—¬ ìµœì¢… ì‹¤í–‰ (ê²°ê³¼: 300)
```

#### ğŸ’» [04-04 Partial application](../workspace-ins/ch04/ex04-04.js)

#### partial ë©”ì„œë“œì— ì‚¬ìš©ëœ ìë°”ìŠ¤í¬ë¦½íŠ¸ ê°œë…
- `Function.prototype.partial`: [prototype](03.js_prototype.md#52-ë‚´ì¥ëœ-ìƒì„±ì-í•¨ìˆ˜ì˜-prototype)
- `(...preArgs)` `(...nextArgs)`: [ë‚˜ë¨¸ì§€ ë§¤ê°œë³€ìˆ˜](01.js_basic.md#23-es6---ë‚˜ë¨¸ì§€-ë§¤ê°œë³€ìˆ˜rest-parameters)
- `this`: [í•¨ìˆ˜ í˜¸ì¶œ ë°©ë²• 2 - ë©”ì„œë“œë¡œ í˜¸ì¶œ](02.js_function.md#72-í•¨ìˆ˜-í˜¸ì¶œ-ë°©ë²•-2---ë©”ì„œë“œë¡œ-í˜¸ì¶œ)
- `return function(){ ... };`: [ê³ ì°¨ í•¨ìˆ˜](02.js_function.md#11-ê³ ì°¨-í•¨ìˆ˜-higher-order-function)
- `[...preArgs, ...nextArgs]` `fn(...ages)`: [ì „ê°œ êµ¬ë¬¸](01.js_basic.md#24-es6---ì „ê°œ-êµ¬ë¬¸spread-syntax)
- ì™¸ë¶€ í•¨ìˆ˜ ë¦¬í„´ í›„ì— `fn` `preArgs` ì ‘ê·¼: [Closure](#11-í´ë¡œì €ë€)

#### lodashì˜ _.partial() í•¨ìˆ˜
- https://lodash.com/docs/#partial
- ì§€ì •í•œ í•¨ìˆ˜ì— Partial application ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ëŠ” í•¨ìˆ˜

#### Function.prototype.bind() ë©”ì„œë“œ
- Partial application ê¸°ëŠ¥ì„ êµ¬í˜„í•œ ë©”ì„œë“œ
- lodashì˜ _.partial() í•¨ìˆ˜ì™€ ë¹„ìŠ·í•˜ë‚˜ ë¯¸ë¦¬ ì „ë‹¬í•˜ëŠ” ì¸ìì— thisë„ ì§€ì •í•˜ëŠ” ê¸°ëŠ¥ì´ ì¶”ê°€

#### ğŸ’» [02-17-05 í•¨ìˆ˜ ë‚´ë¶€ì˜ this ë°”ì¸ë”© ë¬¸ì œ í•´ê²° - Function.prototype.bind()](../workspace-ins/ch02/ex02-17-05.js)
#### ğŸ’» [04-04-02 Partial application - ë¡œê·¸ ì¶œë ¥ í•¨ìˆ˜](../workspace-ins/ch04/ex04-04-02.js)

---

### 2.5 ë©”ëª¨ì´ì œì´ì…˜

#### ë©”ëª¨ì´ì œì´ì…˜ì´ë€?
- í•¨ìˆ˜ì˜ ê²°ê³¼ë¥¼ ìºì‹œí•˜ì—¬ ê°™ì€ ì…ë ¥ì— ëŒ€í•´ ë‹¤ì‹œ ê³„ì‚°í•˜ì§€ ì•Šê³  ì €ì¥ëœ ê²°ê³¼ë¥¼ ë°˜í™˜í•˜ëŠ” ìµœì í™” ê¸°ë²•

#### ì¡´ì¬í•˜ëŠ” í•¨ìˆ˜ì˜ ë™ì‘ì„ ìˆ˜ì • (í´ë¡œì €ê°€ í•„ìš” ì—†ìŒ)
- í•¨ìˆ˜ì˜ ë‚´ë¶€ë¥¼ ìˆ˜ì •í•˜ì§€ ì•Šê³  ë©”ëª¨ì´ì œì´ì…˜ ê¸°ëŠ¥ ì¶”ê°€

```js
Function.prototype.memo = function(key){
  this._cache = this._cache || {};
  if(this._cache[key] !== undefined){
    return this._cache[key];
  }else{
    return this._cache[key] = this(key);
  }
};

isPrime(5); // ìºì‹œë˜ì§€ ì•ŠìŒ
isPrime.memo(1000000007); // ìºì‹œë¨
```

#### ğŸ’» [04-05 ë©”ëª¨ì´ì œì´ì…˜](../workspace-ins/ch04/ex04-05.js)

#### ê¸°ì¡´ í•¨ìˆ˜ë¥¼ ë˜í•‘í•˜ì—¬ ìƒˆë¡œìš´ í•¨ìˆ˜ ìƒì„± (í´ë¡œì € ì´ìš©)

```js
Function.prototype.memoize = function(){
  const fn = this;
  return function(){
    return fn.memo.apply(fn, arguments);
  };
};

isPrime(5); // ìºì‹œë˜ì§€ ì•ŠìŒ
isPrime = isPrime.memoize();
isPrime(5); // ìºì‹œë¨
```

#### ğŸ’» [04-06 ë©”ëª¨ì´ì œì´ì…˜, í´ë¡œì € ì‚¬ìš©](../workspace-ins/ch04/ex04-06.js)

#### memoize ë©”ì„œë“œì— ì‚¬ìš©ëœ ìë°”ìŠ¤í¬ë¦½íŠ¸ ê°œë…
- `Function.prototype.memoize`: [prototype](03.js_prototype.md#52-ë‚´ì¥ëœ-ìƒì„±ì-í•¨ìˆ˜ì˜-prototype)
- `this`: [í•¨ìˆ˜ í˜¸ì¶œ ë°©ë²• 2 - ë©”ì„œë“œë¡œ í˜¸ì¶œ](02.js_function.md#72-í•¨ìˆ˜-í˜¸ì¶œ-ë°©ë²•-2---ë©”ì„œë“œë¡œ-í˜¸ì¶œ)
- `return function(){ ... };`: [ê³ ì°¨ í•¨ìˆ˜](02.js_function.md#11-ê³ ì°¨-í•¨ìˆ˜-higher-order-function)
- `apply`: [í•¨ìˆ˜ í˜¸ì¶œ ë°©ë²• 3 - apply(), call()ë¡œ í˜¸ì¶œ](02.js_function.md#73-í•¨ìˆ˜-í˜¸ì¶œ-ë°©ë²•-3---apply-callë¡œ-í˜¸ì¶œ)
- `arguments`: [ì•”ë¬µì  ë§¤ê°œë³€ìˆ˜ arguments](02.js_function.md#62-arguments)
- ì™¸ë¶€ í•¨ìˆ˜ ë¦¬í„´ í›„ì— `fn` ì ‘ê·¼: [Closure](#11-í´ë¡œì €ë€)

---
